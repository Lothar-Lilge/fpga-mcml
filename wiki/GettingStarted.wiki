#summary Getting Started Guide
#labels Featured
#sidebar SiteMap

<wiki:toc max_depth="2" />

== 1. Top-Level Simulation Flow == 
----
The host computer runs the software portion of the MCML simulation, while the hardware-accelerated portion is run on the FPGA platform, as shown.

[https://fpga-mcml.googlecode.com/svn/wiki/images/flow1b.png] 

== 2. Software Flow == 
----
The main function can be found in the file mcml_tm4.c.  This file calls functions to do the pre-simulation calculations that are handled in software.  The definition of the main structures used in the software flow can be found in mcml.h.

[https://fpga-mcml.googlecode.com/svn/wiki/images/flow2b.png] 

== 2. Software-Hardware Communication == 
----
The communication with hardware is done through a hardware library known as the ports package (linux_tmjports_old.a).  This package uses the USB blaster to communicate with the DE3 board.  Unfortunately, when used with the DE3 board, this package has known issues that result in slow transfer rates.  However, the TM4 package may be replaced by any host-board communication without affecting the main portion of the design: the PhotonCalculator (see next section).
This package requires the use of a configuration file which we have called the mcml_hw.ports file.  This file is included in the /hw directory.  For more information about how the ports package works, download [http://www.eecg.toronto.edu/~tm4/ports.pdf ports.pdf].
